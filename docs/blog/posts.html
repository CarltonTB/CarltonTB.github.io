<html lang="en">
    <head>
        <meta charset="UTF-8"/>
        <link rel="stylesheet" href="/style.css">
        <link rel="icon" type="image/png" sizes="32x32" href="/chart.png"/>
        <link rel="apple-touch-icon" href="/apple-touch-icon.png"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <title>Blog Posts - Carlton Brady</title>
    </head>
    <body class="bg-main">
        <h1 class="name-title">Carlton Brady</h1>
        <nav class="navbar">
            <ul>
                <li><a href="/">About</a></li>
                <li>|</li>
                <li><a href="/blog/posts.html">Blog</a></li>
                <li>|</li>
                <li><a href="https://github.com/CarltonTB">GitHub</a></li>
                <li>|</li>
                <li><a href="https://www.linkedin.com/in/carltontb/">Linkedin</a></li>
            </ul>
        </nav>
        <main>
            <div id="posts-list">
                <p>Loading posts...</p>
            </div>
        </main>
        <script type="module">
            async function loadPosts() {
                try {
                    const response = await fetch('/blog/posts-manifest.json');
                    const posts = await response.json();
                    const postsContainer = document.getElementById('posts-list');
                    if (posts.length === 0) {
                        postsContainer.innerHTML = '<p>No posts yet.</p>';
                        return;
                    }
                    const postsHTML = posts.map(post => `
                        <article class="post-preview">
                            <h2><a href="${post.path}">${post.title}</a></h2>
                            <time datetime="${post.date}">${new Date(post.date).toLocaleDateString('en-US', {
                                year: 'numeric',
                                month: 'long',
                                day: 'numeric'
                            })}</time>
                            ${post.description ? `<p>${post.description}</p>` : ''}
                        </article>
                    `).join('');
                    postsContainer.innerHTML = postsHTML;
                } catch (error) {
                    console.error('Failed to load posts:', error);
                    document.getElementById('posts-list').innerHTML = '<p>Failed to load posts.</p>';
                }
            }
            loadPosts();
        </script>
    </body>
</html>
